{"version":3,"sources":["core/Object.js"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;;;;AACA;;;;IAEM,S;AACJ;;;;;;;;AAOA,uBAAgD;AAAA,QAApC,QAAoC,yDAAzB,EAAyB;AAAA,QAArB,YAAqB,yDAAN,IAAM;AAAA;;AAC9C,QAAM,QAAQ,eACZ,OAAO,MAAP,CAAc,IAAd,EACA;AACE,mBAAa,IADf;AAEE,qBAAe,IAAI,IAAJ,GAAW,OAAX,EAFjB;AAGE,gBAAU,EAHZ;AAIE,kBAAY,QAJd;;AAME,cAAQ,IANV;AAOE,gBAAU;AAPZ,KADA,EAUF,yBAVE,CADY,GAYZ,OAAO,MAAP,CAAc,IAAd,EACA;AACE,mBAAa,IADf;AAEE,qBAAe,IAAI,IAAJ,GAAW,OAAX,EAFjB;AAGE,gBAAU,EAHZ;AAIE,kBAAY;AAJd,KADA,EAOF,yBAPE,CAZF;;AAqBA,WAAO,KAAP;AACD;;;;gCAEsB;AAAA,UAAb,MAAa,yDAAJ,EAAI;;AACrB,WAAK,QAAL,GAAgB,iBAAO,MAAP,EAAe,KAAK,UAApB,CAAhB;AACA,aAAO,KAAK,QAAZ;AACD;;;mCAEyB;AAAA,UAAb,MAAa,yDAAJ,EAAI;;AACxB,WAAK,QAAL,GAAgB,iBAAO,MAAP,EAAe,KAAK,QAApB,CAAhB;AACA,aAAO,KAAK,QAAZ;AACD;;;gCAEW;AACV,aAAO,KAAK,QAAZ;AACD;;;8BAES,M,EAAQ;AAChB,WAAK,OAAL,GAAe,MAAf;AACA,aAAO,KAAK,MAAZ;AACD;;;gCAEW;AACV,aAAO,KAAK,OAAZ;AACD;;;wBAEG,Q,EAAU;AACZ,UAAM,SAAS,IAAf;;AAEA,UAAI,SAAS,KAAb,EACE,OAAO,SAAS,KAAT,CAAe,IAAf,CAAP,CADF,KAEK,IAAI,oBAAoB,MAAxB,EAAgC;AACnC,eAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAa;AAC9B,mBAAS,MAAT,GAAkB,MAAlB;;AAEA,iBAAO,SAAP,GAAmB,GAAnB,CAAuB,SAAS,SAAT,EAAvB;AACA,iBAAO,QAAP,CAAgB,IAAhB,CAAqB,MAArB;;AAEA;AACD,SAPM,CAAP;AAQD;AACF;;AAED;;;;;;;;2BAKO,M,EAAQ;AACb,WAAK,SAAL,GAAiB,MAAjB,CAAwB,OAAO,SAAP,EAAxB;;AAEA,WAAK,QAAL,CAAc,MAAd,CAAqB,KAAK,QAAL,CAAc,OAAd,CAAsB,MAAtB,CAArB,EAAoD,CAApD;AACA,aAAO,MAAP,GAAgB,IAAhB;;AAEA,aAAO,IAAP,CAAY,QAAZ;;AAEA,UAAI,IAAI,KAAR,EAAe;AACb,gBAAQ,KAAR,wBACuB,OAAO,KAD9B,8BAEE,CAAC,MAAD,CAFF;AAID;;AAED,aAAO,IAAP;AACD;;;;;QAID,S,GAAA,S","file":"Object.js","sourcesContent":["import Events from 'minivents';\r\nimport {extend} from '../extras/api';\r\n\r\nclass WHSObject {\r\n  /**\r\n   * Constructing WHS.Shape object.\r\n   *\r\n   * @param {Boolean} structurable - true if object has parents and children.\r\n   * @param {String} type - Shape type.\r\n   * @return {WHS.Object}\r\n   */\r\n  constructor(defaults = {}, structurable = true) {\r\n    const scope = structurable\r\n    ? Object.assign(this,\r\n      {\r\n        __whsobject: true,\r\n        __releaseTime: new Date().getTime(),\r\n        __params: {},\r\n        __defaults: defaults,\r\n\r\n        parent: null,\r\n        children: []\r\n      },\r\n    new Events())\r\n    : Object.assign(this,\r\n      {\r\n        __whsobject: true,\r\n        __releaseTime: new Date().getTime(),\r\n        __params: {},\r\n        __defaults: defaults\r\n      },\r\n    new Events());\r\n\r\n    return scope;\r\n  }\r\n\r\n  setParams(params = {}) {\r\n    this.__params = extend(params, this.__defaults);\r\n    return this.__params;\r\n  }\r\n\r\n  updateParams(params = {}) {\r\n    this.__params = extend(params, this.__params);\r\n    return this.__params;\r\n  }\r\n\r\n  getParams() {\r\n    return this.__params;\r\n  }\r\n\r\n  setNative(native) {\r\n    this._native = native;\r\n    return this.native;\r\n  }\r\n\r\n  getNative() {\r\n    return this._native;\r\n  }\r\n\r\n  add(children) {\r\n    const _scope = this;\r\n\r\n    if (children.addTo)\r\n      return children.addTo(this);\r\n    else if (children instanceof Object) {\r\n      return new Promise((resolve) => {\r\n        children.parent = _scope;\r\n\r\n        _scope.getNative().add(children.getNative());\r\n        _scope.children.push(_scope);\r\n\r\n        resolve();\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove this shape from world.\r\n   *\r\n   * @return {WHS.Shape} - this.\r\n   */\r\n  remove(source) {\r\n    this.getNative().remove(source.getNative());\r\n\r\n    this.children.splice(this.children.indexOf(source), 1);\r\n    source.parent = null;\r\n\r\n    source.emit('remove');\r\n\r\n    if (WHS.debug) {\r\n      console.debug(\r\n        `@WHS.Shape: Shape ${source._type} was removed from world`,\r\n        [source]\r\n      );\r\n    }\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nexport {\r\n  WHSObject\r\n};\r\n"]}