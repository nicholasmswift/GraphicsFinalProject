{"version":3,"sources":["physics/constraints/ConeTwistConstraint.js"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;;;;IAEa,mB,WAAA,mB;AACX,+BAAY,IAAZ,EAAkB,IAAlB,EAAwB,QAAxB,EAAkC;AAAA;;AAChC,QAAM,UAAU,KAAK,SAAL,EAAhB;AACA,QAAM,UAAU,KAAK,SAAL,EAAhB;;AAEA,QAAI,aAAa,SAAjB,EAA4B,QAAQ,KAAR,CAAc,wDAAd;AAC5B,SAAK,IAAL,GAAY,WAAZ;AACA,SAAK,cAAL,GAAsB,CAAtB;AACA,SAAK,EAAL,GAAU,uBAAV;AACA,SAAK,KAAL,GAAa,QAAQ,MAArB;AACA,SAAK,OAAL,GAAe,QAAQ,QAAR,CAAiB,EAAhC;AACA,SAAK,SAAL,GAAiB,uCAA6B,QAA7B,EAAuC,OAAvC,EAAgD,KAAhD,EAAjB;AACA,SAAK,OAAL,GAAe,QAAQ,QAAR,CAAiB,EAAhC;AACA,SAAK,SAAL,GAAiB,uCAA6B,QAA7B,EAAuC,OAAvC,EAAgD,KAAhD,EAAjB;AACA,SAAK,KAAL,GAAa,EAAC,GAAG,QAAQ,QAAR,CAAiB,CAArB,EAAwB,GAAG,QAAQ,QAAR,CAAiB,CAA5C,EAA+C,GAAG,QAAQ,QAAR,CAAiB,CAAnE,EAAb;AACA,SAAK,KAAL,GAAa,EAAC,GAAG,QAAQ,QAAR,CAAiB,CAArB,EAAwB,GAAG,QAAQ,QAAR,CAAiB,CAA5C,EAA+C,GAAG,QAAQ,QAAR,CAAiB,CAAnE,EAAb;AACD;;;;oCAEe;AACd,aAAO;AACL,cAAM,KAAK,IADN;AAEL,YAAI,KAAK,EAFJ;AAGL,iBAAS,KAAK,OAHT;AAIL,iBAAS,KAAK,OAJT;AAKL,mBAAW,KAAK,SALX;AAML,mBAAW,KAAK,SANX;AAOL,eAAO,KAAK,KAPP;AAQL,eAAO,KAAK;AARP,OAAP;AAUD;;;6BAEQ,C,EAAG,C,EAAG,C,EAAG;AAChB,WAAK,KAAL,CAAW,OAAX,CAAmB,oBAAnB,EAAyC,EAAC,YAAY,KAAK,EAAlB,EAAsB,IAAtB,EAAyB,IAAzB,EAA4B,IAA5B,EAAzC;AACD;;;kCAEa;AACZ,WAAK,KAAL,CAAW,OAAX,CAAmB,uBAAnB,EAA4C,EAAC,YAAY,KAAK,EAAlB,EAA5C;AACD;;;uCAEkB,W,EAAa;AAC9B,WAAK,KAAL,CAAW,OAAX,CAAmB,8BAAnB,EAAmD,EAAC,YAAY,KAAK,EAAlB,EAAsB,wBAAtB,EAAnD;AACD;;;mCAEc,M,EAAQ;AACrB,UAAI,kBAAkB,MAAM,OAA5B,EACE,SAAS,IAAI,MAAM,UAAV,GAAuB,YAAvB,CAAoC,IAAI,MAAM,KAAV,CAAgB,OAAO,CAAvB,EAA0B,OAAO,CAAjC,EAAoC,OAAO,CAA3C,CAApC,CAAT,CADF,KAEK,IAAI,kBAAkB,MAAM,KAA5B,EACH,SAAS,IAAI,MAAM,UAAV,GAAuB,YAAvB,CAAoC,MAApC,CAAT,CADG,KAEA,IAAI,kBAAkB,MAAM,OAA5B,EACH,SAAS,IAAI,MAAM,UAAV,GAAuB,qBAAvB,CAA6C,MAA7C,CAAT;;AAEF,WAAK,KAAL,CAAW,OAAX,CAAmB,0BAAnB,EAA+C;AAC7C,oBAAY,KAAK,EAD4B;AAE7C,WAAG,OAAO,CAFmC;AAG7C,WAAG,OAAO,CAHmC;AAI7C,WAAG,OAAO,CAJmC;AAK7C,WAAG,OAAO;AALmC,OAA/C;AAOD","file":"ConeTwistConstraint.js","sourcesContent":["import {convertWorldPositionToObject, getObjectId} from '../api';\r\n\r\nexport class ConeTwistConstraint {\r\n  constructor(obja, objb, position) {\r\n    const objecta = obja.getNative();\r\n    const objectb = obja.getNative();\r\n\r\n    if (position === undefined) console.error('Both objects must be defined in a ConeTwistConstraint.');\r\n    this.type = 'conetwist';\r\n    this.appliedImpulse = 0;\r\n    this.id = getObjectId();\r\n    this.scene = objecta.parent;\r\n    this.objecta = objecta._physijs.id;\r\n    this.positiona = convertWorldPositionToObject(position, objecta).clone();\r\n    this.objectb = objectb._physijs.id;\r\n    this.positionb = convertWorldPositionToObject(position, objectb).clone();\r\n    this.axisa = {x: objecta.rotation.x, y: objecta.rotation.y, z: objecta.rotation.z};\r\n    this.axisb = {x: objectb.rotation.x, y: objectb.rotation.y, z: objectb.rotation.z};\r\n  }\r\n\r\n  getDefinition() {\r\n    return {\r\n      type: this.type,\r\n      id: this.id,\r\n      objecta: this.objecta,\r\n      objectb: this.objectb,\r\n      positiona: this.positiona,\r\n      positionb: this.positionb,\r\n      axisa: this.axisa,\r\n      axisb: this.axisb\r\n    };\r\n  }\r\n\r\n  setLimit(x, y, z) {\r\n    this.scene.execute('conetwist_setLimit', {constraint: this.id, x, y, z});\r\n  }\r\n\r\n  enableMotor() {\r\n    this.scene.execute('conetwist_enableMotor', {constraint: this.id});\r\n  }\r\n\r\n  setMaxMotorImpulse(max_impulse) {\r\n    this.scene.execute('conetwist_setMaxMotorImpulse', {constraint: this.id, max_impulse});\r\n  }\r\n\r\n  setMotorTarget(target) {\r\n    if (target instanceof THREE.Vector3)\r\n      target = new THREE.Quaternion().setFromEuler(new THREE.Euler(target.x, target.y, target.z));\r\n    else if (target instanceof THREE.Euler)\r\n      target = new THREE.Quaternion().setFromEuler(target);\r\n    else if (target instanceof THREE.Matrix4)\r\n      target = new THREE.Quaternion().setFromRotationMatrix(target);\r\n\r\n    this.scene.execute('conetwist_setMotorTarget', {\r\n      constraint: this.id,\r\n      x: target.x,\r\n      y: target.y,\r\n      z: target.z,\r\n      w: target.w\r\n    });\r\n  }\r\n}\r\n"]}